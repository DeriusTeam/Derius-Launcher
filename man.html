<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Derius Launcher - Manutenzione</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="deriuslogo.png" type="image/png">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet"> <!-- Font diverso per la scritta -->
</head>
<body>
    <div class="manutenzione-container">
        <img src="deriuslogo.png" alt="Derius Logo" class="manutenzione-logo">
        <h1>Derius Launcher</h1>
        <p class="manutenzione-messaggio">Il sito è ora in manutenzione, ci scusiamo per il disagio</p>
    </div>

    <script>
        // Funzione per controllare lo stato di manutenzione
        async function checkManutenzione() {
            try {
                // Aggiungi un timestamp alla richiesta per evitare la cache
                const response = await fetch(`/config.json?timestamp=${new Date().getTime()}`);
                const config = await response.json(); // Converti la risposta in JSON

                // Se la manutenzione è disattivata, reindirizza a index.html
                if (!config.is_manutenzione) {
                    window.location.href = "/index.html";
                }
            } catch (error) {
                console.error("Errore durante il caricamento del file di configurazione:", error);
            }
        }

        // Controlla lo stato di manutenzione ogni 5 secondi
        setInterval(checkManutenzione, 5000); // 5000 millisecondi = 5 secondi

        // Esegui il controllo anche al caricamento della pagina
        checkManutenzione();
    </script>
</body>
</html>
